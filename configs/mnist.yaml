# MNIST configuration for Bridge Diffusion (using diffusers UNet2DModel)
# Architecture matches paper: 64 channels, 2 res blocks, attention at 14×14 and 7×7

name: bridge_diffusion_mnist
output_dir: ./outputs/mnist
method: bridge
mlflow_tracking_uri: sqlite:///./outputs/mlflow.db

model:
  in_channels: 1
  out_channels: 1
  sample_size: 28
  block_out_channels: [64, 64, 64]
  layers_per_block: 2
  down_block_types:
    - DownBlock2D
    - AttnDownBlock2D
    - AttnDownBlock2D
  up_block_types:
    - AttnUpBlock2D
    - AttnUpBlock2D
    - UpBlock2D
  attention_head_dim: 4
  dropout: 0.0

training:
  batch_size: 128
  num_steps: 40000
  learning_rate: 0.0001
  weight_decay: 0.0
  grad_clip_norm: 1.0
  checkpoint_every: 5000
  log_every: 100
  seed: 42
  use_ema: true
  ema_decay: 0.9999

bridge:
  T: 0.1
  eps: 0.0000001

sampling:
  num_steps: 100
  num_samples: 64
  show_progress: true
  clip_samples: true

data:
  dataset: mnist
  data_dir: ./data
  image_size: 28
  num_workers: 4
  pin_memory: true
